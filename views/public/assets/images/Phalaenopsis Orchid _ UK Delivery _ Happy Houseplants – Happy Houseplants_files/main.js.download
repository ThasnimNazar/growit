!function(){var t={9533:function(t,n,e){"use strict";e.d(n,{Di:function(){return c},RK:function(){return a},Rg:function(){return i},lp:function(){return u}});var r=e(9246),o=e(95);async function i(t,n){const e=n||"",i=(0,r.Z)()||"";return await(0,o.Mo)(fetch(`https://candyrack.digismoothie.app/api/candyrack/offers?shop=${window.Shopify.shop}&product=${t.id}&product_variant=${e}&lang=${i}`))}function a(t,n,e){const r={shop:window.Shopify.shop,discount_code:t,product_ids:n,variant_ids:e},i=(0,o.CT)(r);return(0,o.mN)(fetch(`https://candyrack.digismoothie.app/api/candyrack/covered-by-discount?${i}`))}async function c(t,n,e){return(await(0,o.mN)(fetch("https://candyrack.digismoothie.app/api/candyrack/generate-discount",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({shop:t,entitled_product_id:e,offer:n})}))).discount_code}async function u(t){if(!t)return;const n={shop:window.Shopify.shop,variant_id:t},e=(0,o.CT)(n);return(await(0,o.mN)(fetch(`https://candyrack.digismoothie.app/api/candyrack/product-handle-for-variant?${e}`))).handle}},4717:function(t,n,e){"use strict";e.d(n,{B1:function(){return f},HR:function(){return s},Py:function(){return d},QW:function(){return l},Xq:function(){return c},dv:function(){return a},h2:function(){return u},ir:function(){return h},wv:function(){return i}});var r=e(95),o=e(9957);function i(t){const n=window.location.pathname,e=(0,r.Z9)(n);return(0,r.mN)(fetch(`${e}/products/${t}.js`))}function a(){return(0,r.mN)(fetch(`/cart.js?_=${(new Date).getTime()}`))}function c(t,n,e){const o={quantity:n,id:t};return e&&(o.properties=e),(0,r.mN)(fetch("/cart/add.js",{...r.Pj,body:JSON.stringify(o)}))}function u(t,n){const e={quantity:n||0,id:String(t)};return(0,r.mN)(fetch("/cart/change.js",{...r.Pj,body:JSON.stringify(e)}))}function d(t,n){let e=0,r=0;return t.map((t=>{const o={...t,offer:n[e]};return r+1===n[e].recommended_product_count?(r=0,e++):r++,o}))}function s(t){const n={updates:t};return(0,r.mN)(fetch("/cart/update.js",{...r.Pj,body:JSON.stringify(n)}))}function f(t){const n={attributes:t};return fetch("/cart/update.js",{...r.Pj,body:JSON.stringify(n)})}async function l(){var t,n;const e=null!==(t="https://candyrack.digismoothie.app/")&&null!==(n=t.trim())&&void 0!==n&&n.length?"https://candyrack.digismoothie.app/":"",o=window.Shopify.shop;return await(0,r.TS)(fetch(`${e}api/apps-info/?shop=${o}`))}async function h(t,n,e,i){const a=(0,r.Z9)(window.location.pathname);try{var c;const o=await(0,r.mN)((0,r.BB)(`${a}/recommendations/products.json?product_id=${t}&limit=${i}`,3e3)),u=null===o||void 0===o||null===(c=o.products)||void 0===c?void 0:c.filter((t=>!t.tags.includes(e)));if((null===u||void 0===u?void 0:u.length)>0)return u;{const t=(0,r.BH)(window.location.pathname);return await(0,r.mN)(fetch(`${n.hostname}api/${n.appPrefix}/smart-upsell-fallback?shop=${window.Shopify.shop}&lang=${t}`))}}catch(u){return(0,o.P)(u),[]}}},2574:function(t,n,e){"use strict";e.d(n,{Bw:function(){return i},E0:function(){return o},F2:function(){return c},eE:function(){return a}});const r=new Map([["order_cannot_be_edited","We couldn\u2019t add the item to the order. Maybe the order has been fulfilled already? Please contact us for more details."],["invalid_input_data","We couldn\u2019t add the item to the order. Please refresh the page and try it again."],["variant_id_not_unique","We couldn\u2019t add the item to the order. Please contact us for more details."],["offer_does_not_exist","We couldn\u2019t add the item to the order as the offer is not valid anymore. Please contact us for more details."]]);class o{transpile(t){return r.get(t)||t}constructor(t){this.errorCode=void 0,this.errors=void 0,this.message=void 0,a(t)?(this.errorCode=t.name,this.message=t.message):(this.errorCode=t.error_code,this.errors=t.errors,this.message=this.transpile(t.error_code))}static transform(t){return new o(t)}}const i=t=>void 0!==(null===t||void 0===t?void 0:t.error_code),a=t=>void 0!==(null===t||void 0===t?void 0:t.message);let c;!function(t){t.CR_IGNORE="cr-ignore",t.LU_IGNORE="lu-ignore",t.CC_IGNORE="cc-ignore"}(c||(c={}))},95:function(t,n,e){"use strict";e.d(n,{BB:function(){return f},BH:function(){return d},CT:function(){return i},Mo:function(){return c},Pj:function(){return o},TS:function(){return u},Z9:function(){return s},mN:function(){return a}});var r=e(2574);const o={method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"}};function i(t){const n=new URLSearchParams;for(const[e,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>n.append(e,String(t)))):n.append(e,String(r));return n.toString()}async function a(t){const n=await t;if(n.status>=500)throw Error("Something unexpected happened.");return 404===n.status?null:await n.json()}async function c(t){const n=await t;if(!n.ok)throw new Error(`Request failed with status ${n.status}: ${n.statusText}`);return await n.json()}async function u(t){const n=await t;let e=null,o=!1;try{e=await n.json()}catch(i){o=!0}return n.status>=400&&(!(0,r.Bw)(e)||o)?{error_code:"It's not you, it's us!",errors:[]}:e}function d(t){if(window.CANDYRACK_DISABLE_LOCALE)return"";if(t.includes("checkout")){const n=t.split("/"),e=n[n.length-2];return 2===e.split("-")[0].length?e:""}const n=/^\/([a-z]{2}(?:-[a-z]{2})?)(?:\/|$)/gi.exec(t);return n&&n[0]?`${n[1]}`:""}function s(t){const n=d(t);return n?`/${n}`:""}async function f(t,n){return new Promise(((e,r)=>{if(fetch(t).then(e,r),n){const t=new Error(`Response exceeded ${n/1e3} second threshold`);setTimeout(r,n,t)}}))}},2371:function(t,n,e){"use strict";var r=e(8246),o=e(95);n.Z=async(t,n)=>{try{return await(0,o.mN)(fetch("https://chunk-errors-monitoring.herokuapp.com/api/chunk-error/",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({app_id:t,shop:n})}))}catch(e){(0,r.Z)(e)}}},5767:function(t,n,e){"use strict";var r;e.d(n,{j:function(){return r}}),function(t){t.CANDYCART="candycart",t.CANDYRACK="candyrack",t.LAST_UPSELL="last_upsell"}(r||(r={}))},4993:function(t,n,e){"use strict";e.d(n,{$c:function(){return a},Je:function(){return i},Q2:function(){return o},dp:function(){return c}});var r=e(9957);function o(t){try{const n=t.closest("form"),e=null===n||void 0===n?void 0:n.attributes.getNamedItem("action");return!e||"/checkout"!==e.value}catch(n){return(0,r.H)("filterCheckoutForms",n),!0}}function i(){return[".add-to-cart",".add_to_cart",".add-to-cart-button",".add_to_cart_button",".button-add-to-cart",".button_add_to_cart",".add-to-cart-btn",".add_to_cart_btn",".btn-add-to-cart",".btn_add_to_cart",".addToCart",".AddToCart",".AddtoCart",".addtocart",".btn-addtocart",".btn--sticky_addtocart",".qsc-btn--add-to-cart","#add-to-cart","#add-to-cart-btn","#btn-add-to-cart","#addToCartButton","#addToCartBtn","#btnAddToCart","#AddToCart","#shopify_add_to_cart"].reduce(((t,n)=>(t.push(`button${n}:not(.cr-ignore)`),t.push(`input${n}:not(.cr-ignore)`),t.push(`a${n}:not(.cr-ignore)`),t)),['form[action*="/cart/add"] button[type=submit]:not(.shopify-payment-button__button):not(.shopify-payment-button__more-options)','form[action*="/cart/add"] input[type=submit]','a[href*="/cart/add"]','form[action="/cart/add"] #button-cart',".product-atc-btn",'form[action="/cart/add"] .shg-btn','form[action*="/cart/add"] [data-product-add]',".btn--add-to-cart",".product-form--atc-button",".cart__checkout-btn",".product-atc__button",".complete-design-a",".product_buttonContainer-addToCart a","#mwAddToCart",'button[data-zp-link-type="cart"]','button[data-pf-type="ProductATC"]','[data-action="add-to-cart"]','[data-action="AddToCart"]',"[name=add]","[name=addToCart]","[name=AddToCart]",".g-stickybar-buynow",".product-form--add-to-cart",".product-form__cart-submit",".addCart",".product-form__cart-submit div",".addtocart-button-active","button.product-page-add-to-cart"].map((t=>`${t}:not(.cr-ignore)`)).concat(window.CANDYRACK_CUSTOM_BUTTON_SELECTORS||[])).join(", ")}function a(){return['button[name="checkout"]','input[name="checkout"]','form[action="/checkout"] [type="submit"]','[href*="checkout"]','[href$="checkout"]','button[value="Checkout"]','input[value="Checkout"]'].map((t=>`${t}:not(.candy-cloned)`)).concat(window.CANDYCART_CUSTOM_BUTTON_SELECTORS||[]).join(",")}function c(t){return 1===(null===t||void 0===t?void 0:t.length)?t[0]:Array.isArray(t)?t.join(", "):t}},5907:function(t,n,e){"use strict";e.d(n,{J_:function(){return i},sO:function(){return c},ZP:function(){return u}});var r=function(t){let n;try{n=window[t];const e="__storage_test__";return n.setItem(e,e),n.removeItem(e),!0}catch(e){return!1}};function o(){return new Proxy({},{get:function(t,n){return n in t?t[n]:null}})}class i{get length(){return this.__storage?Object.keys(this.__storage).length:window[this.__type].length}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage";this.__storage=void 0,this.__type=void 0,this.__type=t,this.__storage=r(t)?null:o()}key(t){if(this.__storage){const n=Object.keys(this.__storage);return n.length<=t||t<0?null:n[t]}return window[this.__type].key(t)}getItem(t){return this.__storage?this.__storage[t]:window[this.__type].getItem(t)}clear(){this.__storage&&(this.__storage=o()),window[this.__type].clear()}removeItem(t){this.__storage&&delete this.__storage[t],window[this.__type].removeItem(t)}setItem(t,n){this.__storage?this.__storage[t]=n:window[this.__type].setItem(t,n)}}const a=new i,c=new i("sessionStorage");var u=a},146:function(t,n,e){"use strict";let r;e.d(n,{r$:function(){return r},ke:function(){return o},v3:function(){return a},WZ:function(){return i},I9:function(){return c}}),function(t){t.CANDY_RACK_PRODUCTS="products",t.CANDY_RACK_COLLECTIONS="collections",t.LAST_UPSELL="checkouts"}(r||(r={}));const o=t=>{var n;return void 0!==(null===(n=t.buttons)||void 0===n?void 0:n.reject)},i=t=>void 0!==t.button_color,a=t=>!(void 0!==t.ajax_cart_watcher_selector)&&"grid"===t.popup_layout,c=t=>a(t)?"-grid":""},8980:function(t,n,e){"use strict";e.d(n,{n6:function(){return s},sp:function(){return m},rm:function(){return d},Xi:function(){return f},a9:function(){return h},LM:function(){return l},tA:function(){return p}});var r=e(5907),o=e(6591),i=e(146);function a(){const t=window.location.pathname.match(/[0-9]+\/orders|checkouts\/[A-Za-z0-9]+/);return!(null===t||void 0===t||!t.length)}function c(t){return window.location.pathname.includes(t)}var u=e(4993);function d(){s.isBaseApp()&&(r.ZP.removeItem(o.Gv),r.ZP.removeItem(o.xY))}const s={isBaseApp:()=>"true"===r.ZP.getItem(o.CN)||"false"!==r.ZP.getItem(o.CN)&&Boolean("https://candyrack.digismoothie.app/".trim().length>0),isForkedApp:()=>"true"!==r.ZP.getItem(o.CN)&&("false"===r.ZP.getItem(o.CN)||Boolean("false"===r.ZP.getItem(o.CN)||"")),isCandyRackExistingAndNotLoading:t=>{var n,e;return(null===(n=t.candyrack)||void 0===n?void 0:n.is_installed)&&!(null!==(e=window.CandyRack)&&void 0!==e&&e.isLoading)}};function f(t,n){return s.isCandyRackExistingAndNotLoading(t)&&function(t){return t.isEnabled||a()}(n)}function l(t,n){return s.isBaseApp()&&s.isCandyRackExistingAndNotLoading(t)&&n.isEnabled}function h(t){var n;const e=t.candyrack&&t.candyrack.is_installed&&t.candyrack.is_checkout_button_offers_existing;return(s.isBaseApp()&&e||s.isForkedApp()&&t.candycart.is_installed&&!e)&&!(null!==(n=window.CandyCart)&&void 0!==n&&n.isLoading)&&!a()}function p(t){var n,e;const r=t.candyrack&&t.candyrack.is_installed&&t.candyrack.is_thank_you_page_offers_existing;return(s.isBaseApp()&&r||(null===(n=t.last_upsell)||void 0===n?void 0:n.is_installed)&&s.isForkedApp()&&!r)&&a()&&!(null!==(e=window.LastUpsell)&&void 0!==e&&e.isLoading)}const m=()=>{if(c(i.r$.CANDY_RACK_PRODUCTS)||c(i.r$.CANDY_RACK_COLLECTIONS)||(0,u.$c)().length>0||window.CANDYRACK_FORCE_LOAD)return{isEnabled:!0,shouldRender:!0};if(window.location.pathname.includes("cart")){const t=r.ZP.getItem(o.Tx),n=r.ZP.getItem(o.fu),e=r.ZP.getItem(o.P2);return n||e||t?{isEnabled:!0,shouldRender:!1}:{isEnabled:!1,shouldRender:!1}}return{isEnabled:!1,shouldRender:!1}}},9980:function(t,n,e){"use strict";e.d(n,{E7:function(){return d},E9:function(){return c},Hh:function(){return l},KL:function(){return m},OD:function(){return y},PC:function(){return s},XG:function(){return h},ZJ:function(){return f},zD:function(){return v}});var r=e(4717),o=e(5907),i=e(6591),a=e(9957);const c="candyrack-associated-products-for-removal",u="candyrack-translations";function d(t,n,e){o.ZP.setItem(i.fu,JSON.stringify({...s(),[t.shopify_product_variant_id]:n})),t.remove_upsell_product_when_parent_product_is_removed&&o.ZP.setItem(c,JSON.stringify({...f(),[t.shopify_product_variant_id]:{handle:n,quantity:t.quantity,parentProductVariantId:e}}))}function s(){const t=o.ZP.getItem(i.fu);if(t)try{return JSON.parse(t)}catch{return{}}return{}}function f(){const t=o.ZP.getItem(c);if(t)try{return JSON.parse(t)}catch{return{}}return{}}function l(t){o.ZP.setItem(u,JSON.stringify(t))}function h(t,n){const{cart_discount_note:e}=function(){const t=o.ZP.getItem(u)||"";let n={cart_discount_note:"Discount AMOUNT will be applied at checkout."};try{var e;const r=JSON.parse(t);n.cart_discount_note=(null===(e=r.text)||void 0===e?void 0:e.cart_discount_note)||n.cart_discount_note}catch{}return n}();if(document.querySelectorAll("[candyrack-cart-info]").forEach((t=>t.remove())),t&&n)for(const r of t)p(r,e.replace("AMOUNT",n))}function p(t,n){const e=Array.from(document.querySelectorAll(`a[href$="${t}"]`));let r=e.filter((t=>!t.firstElementChild||"IMG"!==t.firstElementChild.tagName));0===r.length&&(r=e),r.length>0&&r[r.length-1].insertAdjacentHTML("afterend",`<div candyrack-cart-info style="font-size: 12px;">${n}</div>`)}function m(){o.ZP.removeItem(i.fu)}async function y(t){v(await(0,r.dv)(),t)}function v(t,n){for(const e of Object.keys(s()))if(!t.items.find((t=>t.variant_id===Number(e)))){(0,a.P)(`Variant ${e} not found. Removing association info...`,n);const t=s();delete t[e],o.ZP.setItem(i.fu,JSON.stringify(t))}!function(t,n){var e;if(null!==(e=window.CandyRack)&&void 0!==e&&e.popupOpen)return void(0,a.P)("not checking removeUpsellProductWhenParentProductIsRemoved because modal is open",n);const i=f();let u={};const d={};for(const r of Object.keys(i)){(0,a.P)(`Checking variant ${r}`,n);const e=t.items.find((t=>t.handle===i[r].handle&&t.variant_id===i[r].parentProductVariantId)),o=t.items.find((t=>t.variant_id===Number(r))),c=(null===e||void 0===e?void 0:e.variant_id)===Number(r)&&(null===e||void 0===e?void 0:e.quantity)<=i[r].quantity,s=!e||1===t.items.filter((t=>t.variant_id===e.variant_id)).length;if(!e&&o||c&&s){(0,a.P)(`Parent ${i[r].handle} not found. Removing upsell product...`,n);let t=o.quantity-i[r].quantity;t=t<0?0:t,u[o.variant_id]=t}else d[r]=i[r]}o.ZP.setItem(c,JSON.stringify(d)),Object.keys(u).length>0&&Promise.resolve((0,r.HR)(u)).then((()=>window.location.reload()))}(t,n)}},6591:function(t,n,e){"use strict";e.d(n,{CN:function(){return d},Gv:function(){return c},P2:function(){return r},Tx:function(){return o},fu:function(){return i},rh:function(){return u},xY:function(){return a}});const r="candyrack-discount-code",o="candyrack-discounted-product",i="candyrack-associated-products",a="candycart-discount-code",c="candycart-discounted-product",u="candyrack-offset-value",d="is-candyrack-base-app-for-test-purposes"},6995:function(t,n,e){"use strict";e.d(n,{Tc:function(){return b},Ms:function(){return C},cO:function(){return _},$b:function(){return y},iz:function(){return k},hZ:function(){return p},es:function(){return l},KF:function(){return h},nK:function(){return m}});var r=e(5767),o=e(9533),i=e(4717),a=e(5907),c=e(9980),u=e(6591),d=e(9957);function s(t,n){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r,o,i,a,c=0;return function(){r=this,o=arguments;var t=new Date-c;return a||(t>=n?(e&&u(),a=setTimeout(u,n)):a=setTimeout(u,n-t)),i};function u(){a=0,c=+new Date,i=t.apply(r,o),r=null,o=null}}const f="form[action*='/checkout'], form[action*='/cart'], form[action*='/a/checkout']";async function l(t,n,e,o,i){a.ZP.setItem(u.P2,t),a.ZP.setItem(u.Tx,JSON.stringify({variantId:n,discountedPrice:e,discount:o,relatedProductId:i})),fetch(`/discount/${t}`,{credentials:"same-origin",redirect:"manual"}),m(r.j.CANDYRACK)}function h(t,n){a.ZP.setItem(u.xY,t),a.ZP.setItem(u.Gv,JSON.stringify({variantId:n,discount:t}))}function p(t,n){const e=a.ZP.getItem(u.xY),r=JSON.parse(a.ZP.getItem(u.Gv)||"{}");t===e&&(null===r||void 0===r?void 0:r.variantId)===n&&(a.ZP.removeItem(u.Gv),a.ZP.removeItem(u.xY))}function m(t){v(t),g(t)}function y(t){let n=null;var e;return r.j.CANDYRACK===t&&(n=a.ZP.getItem(u.P2)),n&&" "!==n||(e="discount_code",n=document.cookie.split(/; */).map((t=>{const[n,...e]=t.split("=");let r=e.join("=");try{r=decodeURIComponent(r)}catch(o){}return[n,r]})).reduce(((t,n)=>{let[e,r]=n;return Object.assign(t,{[e]:r})}),{})[e]||""||function(){const t=document.querySelectorAll("[name=discount]");for(const n of Array.from(t))if(n.value)return n.value}()||" "),n}function v(t){const n=y(t);r.j.CANDYRACK===t&&async function(t){if(!t.trim())return;const{discount:n}=w();if(!document.querySelector("a[href*='?variant=']"))return;const e=await(0,i.dv)();if(0===e.items.length)return;const r=e.items.map((t=>t.product_id)),a=e.items.map((t=>t.variant_id)),u=await(0,o.RK)(t,r,a);(0,c.XG)(u,n)}(n),window.chCouponCode=n;const e=document.querySelectorAll(f);Array.from(e).forEach((t=>{const e=t.querySelector("[name=discount]");e?""===e.value.trim()&&" "!==n&&(e.value=n):t.insertAdjacentHTML("beforeend",`<input type="hidden" name="discount" value="${n}" />`)}))}function g(t){const n=y(t),e=window.Weglot&&window.Weglot.getCurrentLang(),r=`/checkout?discount=${n}${e?`&locale=${e}`:""}`;function o(t){t.preventDefault(),t.stopImmediatePropagation(),window.location.href=r}const i=document.querySelectorAll('[href^="/checkout"],[name=return_to][value^="/checkout"],button[onclick],[data-component-checkout-button]');Array.from(i).forEach((t=>{var n,e;t instanceof HTMLAnchorElement&&(t.href=r),t instanceof HTMLInputElement&&(t.value=r),t instanceof HTMLButtonElement&&null!==(n=t.attributes.getNamedItem("onclick"))&&void 0!==n&&null!==(e=n.value)&&void 0!==e&&e.match(/location.*checkout/)&&(t.onclick=o),t instanceof HTMLButtonElement&&t.attributes.getNamedItem("data-component-checkout-button")&&(t.onclick=o)}))}function _(){a.ZP.removeItem(u.P2),a.ZP.removeItem(u.Tx)}function w(){const t=a.ZP.getItem(u.Tx);if(t)try{return JSON.parse(t)}catch{return{}}return{}}function k(t){m(t),function(t){const n=s((()=>v(t)),1e3,!0),e=s((()=>g(t)),1e3,!0),r=s((()=>(0,c.OD)(t)),3e3),o=function(t){e(),r();for(const e of t)if("childList"===e.type)for(var o of e.addedNodes)(o.action&&(o.action.indexOf("/cart")>-1||o.action.indexOf("/checkout")>-1||o.action.indexOf("/a/checkout")>-1)||o.querySelector&&o.querySelector("a[href*='?variant=']"))&&n()};try{const t=new MutationObserver(o),n=document.body;t.observe(n,{childList:!0,subtree:!0})}catch(i){(0,d.H)("Failed to setup drawer cart observer",t,i)}}(t)}function b(t,n,e,r){if(r){return t-("fixed_amount"===e?n:t*n/100)}return t}function C(t,n){const{variantId:e,relatedProductId:r}=w(),o=t.items.find((t=>t.variant_id===Number(e)));e&&!o&&((0,d.P)(`Variant ${e} not found. Removing discount info...`,n),_()),t.items.find((t=>t.product_id===Number(r)))||((0,d.P)(`Related product ${r} not found. Removing discount info...`,n),_(),a.ZP.setItem(u.P2," "),v(n))}},9246:function(t,n){"use strict";n.Z=()=>{var t;const n={Weglot:()=>{var t;return null===(t=window.Weglot)||void 0===t?void 0:t.getCurrentLang()},langify:()=>{var t,n;return null===(t=window.langify)||void 0===t||null===(n=t.locale)||void 0===n?void 0:n.iso_code},GTranslateGetCurrentLang:()=>window.GTranslateGetCurrentLang(),LangShop:()=>{var t,n,e;return(null===(t=window.LangShop)||void 0===t?void 0:t.currentLanguage)||(null===(n=window.LangShop)||void 0===n||null===(e=n.getCurrentLanguage())||void 0===e?void 0:e.code)}};for(const[e,r]of Object.entries(n))if(window[e])return r()||window.Shopify.locale;return null===(t=window.Shopify)||void 0===t?void 0:t.locale}},9957:function(t,n,e){"use strict";e.d(n,{H:function(){return u},P:function(){return d}});var r=e(5767),o=e(5907);const i="candyrack-debug";let a=!0;try{a=!!o.ZP.getItem(i)}catch{}function c(t){return t?`${t}: `:"Could not determine app: "}function u(t,n){const e="string"===typeof t?c(n)+t:t;for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];console.error(e,...o)}function d(t,n){if(!a)return;const e="string"===typeof t?c(n)+t:t;for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];console.info(e,...o)}window.candyrackEnableDebug=()=>{o.ZP.setItem(i,String(!0)),a=!0,d("Enabled console output \ud83d\udd27",r.j.CANDYRACK)}},8246:function(t,n,e){"use strict";var r=e(9957);const o=[];let i=(t,n,a)=>{if(0===o.length&&async function(t){(0,r.P)("Encountered error. Loading Sentry...",t);const{init:n,withScope:a,captureException:c}=await e.e(10).then(e.bind(e,4628));n({dsn:"https://bfd888898e014624a09051192a92ff6d@o187547.ingest.sentry.io/5583637",integrations:t=>t.filter((t=>"ReportingObserver"!==t.name&&"TryCatch"!==t.name&&"GlobalHandlers"!==t.name)).map((t=>("InboundFilters"===t.name&&(t.ignoreErrors=["Failed to fetch","SecurityError","localStorage","fetch","The request timed out.","InvalidStateError","Access is denied.","The operation couldn\u2019t be completed","NetworkError","ChunkLoadError"]),t)))}),i=(t,n,e)=>{e&&a((t=>{Object.keys(e).forEach((n=>{t.setExtra(n,e[n])}))})),c(t)},(0,r.P)("Sentry loaded",t),o.forEach((n=>{let{error:e,errorInfo:o}=n;(0,r.P)("Sending error",t,e),i(e,o)}))}(n),t instanceof Error)o.push({error:t,errorInfo:a});else try{o.push({error:new Error(`Unknown error, please recheck creation: ${JSON.stringify(t)}`),errorInfo:a})}catch(t){o.push({error:new Error("Unknown error, please recheck creation"),errorInfo:a})}};n.Z=i},2631:function(t,n,e){"use strict";e.d(n,{Z:function(){return l},c:function(){return f}});var r=e(2862),o=e.n(r),i=e(4717),a=e(95),c=e(5907),u=e(8246),d=e(9980),s=e(6995);const f="candyrack-tracking";class l{constructor(){this.cartToken=void 0,this.shop=void 0,this.storage=new c.J_("sessionStorage"),this.cartToken=this.storage.getItem(f),this.shop=window.Shopify.shop}async getCartToken(){if(!this.cartToken){const{token:t}=await(0,i.dv)();this.cartToken=t,this.storage.setItem(f,t)}return this.cartToken}async trackView(t){return this.track({event_type:"view",cart_token:await this.getCartToken(),shop:this.shop,data:{},offers:t.map((t=>t.id))})}async trackAddToCart(t,n){return await(0,i.B1)({candyrack_token:await this.getCartToken()}),this.track({event_type:"add_to_cart",cart_token:await this.getCartToken(),shop:this.shop,offer:t.id,data:{shopify_product_variant_id:t.shopify_product_variant_id,parent_product:{id:n.id,handle:n.handle},quantity:t.quantity||1}})}async trackRemoveFromCart(t){return this.track({event_type:"remove_from_cart",cart_token:await this.getCartToken(),shop:this.shop,offer:t.id,data:{}})}async cleanUpCandyRackStorageTrackingInformation(){if(window.Shopify.checkout){await this.getCartToken()&&((0,d.KL)(),(0,s.cO)(),this.storage.removeItem(f))}}track(t){const n=(0,a.mN)(fetch("https://candyrack.digismoothie.app/api/candyrack/track-offers",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)})).catch((t=>(0,u.Z)(t)));return o()(n,500)}}},2862:function(t){t.exports=function(t,n,e){var r,o=t.constructor,i=e&&e.rejectWith,a=e&&e.resolveWith,c=new o((function(t,e){r=setTimeout((function(){void 0!==i?e(i):t(a)}),n)}));return o.race([c,t]).then((function(t){return r.unref&&r.unref(),t}),(function(t){throw r.unref&&r.unref(),t}))}}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,loaded:!1,exports:{}};return t[r](i,i.exports,e),i.loaded=!0,i.exports}e.m=t,e.F={},e.E=function(t){Object.keys(e.F).map((function(n){e.F[n](t)}))},e.H={},e.G=function(t){Object.keys(e.H).map((function(n){e.H[n](t)}))},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,r){return e.f[r](t,n),n}),[]))},e.u=function(t){return"static/js/"+t+"."+{1:"5e6fa8b7",2:"91850de3",3:"aed28d76",4:"1b895f4d",5:"33c0fb09",6:"feccacc3",7:"97145a1b",8:"c6b6259f",9:"3b12be48",10:"fbc00533",11:"4bd6aaaa"}[t]+".chunk.js"},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),e.hmd=function(t){return(t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},function(){var t={},n="frontend-client:";e.l=function(r,o,i,a){if(t[r])t[r].push(o);else{var c,u;if(void 0!==i)for(var d=document.getElementsByTagName("script"),s=0;s<d.length;s++){var f=d[s];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==n+i){c=f;break}}c||(u=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,e.nc&&c.setAttribute("nonce",e.nc),c.setAttribute("data-webpack",n+i),c.src=r),t[r]=[o];var l=function(n,e){c.onerror=c.onload=null,clearTimeout(h);var o=t[r];if(delete t[r],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(t){return t(e)})),n)return n(e)},h=setTimeout(l.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=l.bind(null,c.onerror),c.onload=l.bind(null,c.onload),u&&document.head.appendChild(c)}}}(),e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.p="https://candyrack.ds-cdn.com/",function(){var t={0:0};e.f.j=function(n,r){var o=e.o(t,n)?t[n]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise((function(e,r){o=t[n]=[e,r]}));r.push(o[2]=i);var a=e.p+e.u(n),c=new Error;e.l(a,(function(r){if(e.o(t,n)&&(0!==(o=t[n])&&(t[n]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;c.message="Loading chunk "+n+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,o[1](c)}}),"chunk-"+n,n)}},e.F.j=function(n){if(!e.o(t,n)||void 0===t[n]){t[n]=null;var r=document.createElement("link");e.nc&&r.setAttribute("nonce",e.nc),r.rel="prefetch",r.as="script",r.href=e.p+e.u(n),document.head.appendChild(r)}},e.H.j=function(n){if(!e.o(t,n)||void 0===t[n]){t[n]=null;var r=document.createElement("link");r.charset="utf-8",e.nc&&r.setAttribute("nonce",e.nc),r.rel="preload",r.as="script",r.href=e.p+e.u(n),document.head.appendChild(r)}};var n=function(n,r){var o,i,a=r[0],c=r[1],u=r[2],d=0;if(a.some((function(n){return 0!==t[n]}))){for(o in c)e.o(c,o)&&(e.m[o]=c[o]);if(u)u(e)}for(n&&n(r);d<a.length;d++)i=a[d],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0},r=self.webpackJsonpCandyRack=self.webpackJsonpCandyRack||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}(),function(){var t={4:[3],5:[2],7:[1]};e.f.prefetch=function(n,r){Promise.all(r).then((function(){var r=t[n];Array.isArray(r)&&r.map(e.E)}))}}(),function(){var t={6:[8],8:[7],9:[4],11:[5]};e.f.preload=function(n){var r=t[n];Array.isArray(r)&&r.map(e.G)}}(),function(){"use strict";var t=e(2574),n=e(8246),r=e(9957),o=e(5767),i=e(2371),a=e(8980),c=e(4717);async function u(){if(await(0,c.dv)()&&window.Shopify.checkout)try{window.Currency||await(t="https://cdn.shopify.com/s/javascripts/currencies.js",new Promise(((n,e)=>{var r=document.createElement("script");r.onerror=t=>{e(new URIError(t instanceof Event?"The script "+t.target.src+" didn't load correctly.":"The script didn't load correctly. "+t))},r.onload=n,document.head.appendChild(r),r.src=t})))}catch(n){(0,r.H)(n)}var t}var d=e(2631);const s=t=>{var e;if(null!==t&&void 0!==t&&null!==(e=t.candyrack)&&void 0!==e&&e.is_installed&&!window.CANDYRACK_CONFIG_EXECUTED){var i;const n=null===(i=t.candyrack.config)||void 0===i?void 0:i.trim();if(n)try{window.CANDYRACK_CONFIG_EXECUTED=!0,window.eval(n)}catch(p){(0,r.H)("Config file contains an error",o.j.CANDYRACK)}}const c=(0,a.sp)();if((0,a.Xi)(t,c)&&u().catch((t=>(0,n.Z)(t))),(0,a.LM)(t,c)){const t=new d.Z;t.cleanUpCandyRackStorageTrackingInformation().catch((()=>{})),window.CandyRack=window.CandyRack?{...window.CandyRack,isLoading:!0}:{isLoading:!0},f(c.shouldRender,t)}if((0,a.a9)(t)&&(window.CandyCart=window.CandyCart?{...window.CandyCart,isLoading:!0}:{isLoading:!0},l()),(0,a.tA)(t)){var s;if(null!==(s=t.candyrack)&&void 0!==s&&s.is_installed){(new d.Z).cleanUpCandyRackStorageTrackingInformation().catch((()=>{}))}window.LastUpsell=window.LastUpsell?{...window.LastUpsell,isLoading:!0}:{isLoading:!0},h()}},f=(t,n)=>{e.e(6).then(e.bind(e,7276)).then((e=>{let{default:r}=e;return r(t,n)})).catch((()=>{(0,i.Z)(o.j.CANDYRACK,window.Shopify.shop)}))},l=()=>{e.e(11).then(e.bind(e,6919)).then((t=>{let{default:n}=t;return n()})).catch((()=>{(0,i.Z)(o.j.CANDYCART,window.Shopify.shop)}))},h=()=>{e.e(9).then(e.bind(e,2269)).then((t=>{let{default:n}=t;return n()})).catch((()=>{(0,i.Z)(o.j.LAST_UPSELL,window.Shopify.shop)}))},p=async()=>{const e=await(0,c.QW)();var o;o=e,(0,t.Bw)(o)?((0,r.H)(o),(0,n.Z)({name:"APIError: installation check",message:o.error_code}),(0,a.rm)()):(0,t.eE)(o)?((0,r.H)(o),(0,a.rm)()):s(o)},m=document.createElement("style");m.textContent="\n .candyrack-body-open {\n  position: fixed !important;\n  overflow-y: scroll!important;\n  width: 100%!important;\n }\n",document.head.appendChild(m),"complete"===document.readyState||"interactive"===document.readyState?p():document.addEventListener("DOMContentLoaded",p)}()}();
//# sourceMappingURL=main.js.map